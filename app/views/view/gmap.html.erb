<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>



<h1>This is a Google maps page</h1>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

</br>

<button onclick="verify()"><%= link_to('Verify Trip', view_tripdata_path) %></button> 

<script type = 'text/javascript'>

  eventsData = <%=raw @hash_eventsData.to_json %>;

  console.log(eventsData);

  var map;
  var bounds = new google.maps.LatLngBounds();

  initMap();
  drawTripIntermediatePoints(eventsData);
  drawTripPolyline(eventsData);
  drawTripTransferZone(eventsData);
  map.fitBounds(bounds);

  function verify(button) {
    <%= t = Trip.find(@tripId)
    t.verified = true
    t.save %>
  }

</script>
